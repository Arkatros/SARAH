<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Patient registration</mat-card-title>
    </mat-card-header>
    
    <hr class="linea-gradiente">

    <mat-card-content>
      <form [formGroup]="patientForm" (ngSubmit)="onSubmit()">
        
        <!-- Datos personales -->
        <div class="section">
          <h3 class="section-title">Personal information</h3>
          
          <div class="form-row">
            <mat-form-field>
              <mat-label>First name *</mat-label>
              <input matInput formControlName="name">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Last name *</mat-label>
              <input matInput formControlName="lastName">
            </mat-form-field>
          </div>

          <div class="form-row">
            <mat-form-field>
              <mat-label>Email *</mat-label>
              <input matInput type="email" formControlName="email">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Phone *</mat-label>
              <input matInput formControlName="phone">
            </mat-form-field>
          </div>

          <!-- <div class="form-row">
            <mat-form-field >
              <mat-label>Midwife id *</mat-label>
              <input matInput type="number" formControlName="midWifeId" readonly >
            </mat-form-field>
          </div> -->

          <div class="form-row">
            <mat-form-field>
              <mat-label>Date of birth</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="dateOfBirth">
              <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Ethnicity</mat-label>
              <input matInput formControlName="ethnicity">
            </mat-form-field>
          </div>

          <mat-form-field class="full-width">
            <mat-label>Residential status</mat-label>
            <input matInput formControlName="residentialStatus">
          </mat-form-field>
        </div>

        <hr>

        <!-- Datos pareja -->
        <div class="section">
          <h3 class="section-title">Partner information (optional)</h3>
          
          <div class="form-row">
            <mat-form-field>
              <mat-label>Partner's name</mat-label>
              <input matInput formControlName="partnerName">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Date of birth</mat-label>
              <input matInput [matDatepicker]="partnerPicker" formControlName="partnerDateOfBirth">
              <mat-datepicker-toggle matIconSuffix [for]="partnerPicker"></mat-datepicker-toggle>
              <mat-datepicker #partnerPicker></mat-datepicker>
            </mat-form-field>
          </div>

          <mat-form-field class="full-width">
            <mat-label>Partner's address</mat-label>
            <input matInput formControlName="partnerAddress">
          </mat-form-field>

          <div class="form-row">
            <mat-form-field>
              <mat-label>Partner's email</mat-label>
              <input matInput type="email" formControlName="partnerEmail">
            </mat-form-field>

            <mat-form-field>
              <mat-label>Partner's phone</mat-label>
              <input matInput formControlName="partnerPhone">
            </mat-form-field>
          </div>
        </div>

        <hr>

        <!-- Datos mÃ©dico -->
        <div class="section">
          <h3 class="section-title">General practitioner (optional)</h3>
          
          <mat-form-field class="full-width">
            <mat-label>GP name</mat-label>
            <input matInput formControlName="GPName">
          </mat-form-field>

          <div class="form-row">
            <mat-form-field>
              <mat-label>GP email</mat-label>
              <input matInput type="email" formControlName="GPEmail">
            </mat-form-field>

            <mat-form-field>
              <mat-label>GP phone</mat-label>
              <input matInput formControlName="GPPhone">
            </mat-form-field>
          </div>
        </div>

        <div class="button-row">
          <button mat-raised-button type="button" (click)="onReset()" [disabled]="isLoading">
            Clear
          </button>
          
          <button mat-raised-button type="submit" class="btn-primary" [disabled]="isLoading || !patientForm.valid">
            @if(isLoading) {
              <mat-spinner diameter="20"></mat-spinner>
            } @else {
            <span>Register patient</span>
            }
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

